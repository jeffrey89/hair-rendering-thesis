\documentclass{beamer}
\usecolortheme{beaver}
\usetheme{CambridgeUS}
\usepackage[export]{adjustbox}

\begin{document}
  \begin{frame}
    \frametitle{Background}
	\framesubtitle{Rendering hair}
	
	Important for variety of industries
	\begin{itemize}
	\item Animation movie industry: to render realistic hairs in a physically accurate way.
	\item Game industry: enhance realism and visual effects.
	\item Clothes manufacturing industry: to render custom fabrics and to compare appearance in different lighting conditions.
	\item Hair styling: render hair styling products applied to the hair.
	\end{itemize}
  \end{frame}
  
  \begin{frame}
    \frametitle{Rendering hair}
	\framesubtitle{Hair fiber representation}
	Explicit representation vs. Implicit representation
	
	\begin{itemize}
	\item Explicit representation represents each fiber by geometric primitives (e.g. triangles)
	\item Implicit representation represents fiber
	\end{itemize}
	
	There are a couple of ways to represent hair fibers:
	\begin{itemize}
	\item Connected triangle strips
	\item Cylindrical primitives
	\item Trigonal prisms
	\item Ribbons
	\end{itemize}
	

  \end{frame}
  
  \begin{frame}
    \frametitle{Rendering hair}
	\framesubtitle{Rendering challenges}
	
	Human hair consists of over hundreds of thousands of hair strands.
	Leads to rendering challenges:
	\begin{itemize}
	\item Memory consumption: to store all fibers in memory.
	\item Time: rendering realistic scattering effects requires tracing many samples through the hair volume.
	\item Aliasing: Hair fibers are very thin, requiring additional samples to be drawn to prevent aliasing.
	\end{itemize}
	

  \end{frame}
  
  % end Rendering hair
  
  \begin{frame}
    \frametitle{Mathematical notation}
	\framesubtitle{Radiometry}
	\begin{itemize}
	\item Power (Watts): energy in Joules per second.
	\item Radiant intensity (steradians): power divided by the solid angle.
	\item Irradiance (Watts per $m^2$): power per unit area.
	\item Radiance : Irradiance per solid angle, where solid angle goes to zero (becoming a ray instead of a cone).
	\end{itemize}
  \end{frame}
  
  \begin{frame}
    \frametitle{Mathematical notation}
	\framesubtitle{Scattering equations}
	
	Scattering is represented by a bidirectional reflection distribution function (BRDF):
	
	\begin{equation}
	f_r(p, \omega_o, \omega_i) = \frac{dL_o(p, \omega_o)}{dE(p, \omega_i)} = \frac{dL_o(p, \omega_o)}{L_i(p, \omega_i) \cos \theta_i d\omega_i}
	\end{equation}
	
	The BRDF is the fraction of outgoing radiance in direction $\omega_o$ related to the incident irradiance from direction $\omega_i$.

  \end{frame}
  
  \begin{frame}
    \frametitle{Mathematical notation}
	\framesubtitle{Hair fibers}
	
	
	
  \end{frame}
  
  
\begin{frame}
    \frametitle{Mathematical notation}
	\framesubtitle{Bidirectional curve scattering distribution function (BCSDF)}
	
	\begin{itemize}
	\item Hair fibers are rendered implicitly by 3D curves.
	\item Curves have no surface area. They have a length, requiring a change to the BRDF formulation.
	\end{itemize}
	
	\begin{equation}
	S_r(\omega_o, \omega_i) = \frac{dL_o(\omega_o)}{dE_i(\omega_i)} = \frac{dL_o(\omega_o)}{DL_i(\omega_i) \cos \theta_i d\omega_i}
	\end{equation}
	
	\begin{equation}
	L_o(\omega_o) = D \int S(\omega_i, \omega_o) L_i(\omega_i) \cos \theta_i d\omega_i
	\end{equation}

  \end{frame}  
  
  
% end mathematical notation  
  
  \begin{frame}
    \frametitle{Monte-Carlo integration}
    
    Numerical integration technique based on random numbers \\
    Possible to integrate any definite higher dimensional integrals.
    
    \begin{equation}
    F_N = \frac{b-a}{N} \sum^N_{i=1} f(X_i)
    \end{equation}
    
    \begin{equation}
    F_N = \frac{1}{N} \sum^N_{i=1} \frac{f(X_i)}{p(X_i)}
    \end{equation}
  \end{frame}
  
  \begin{frame}
    \frametitle{Multiple importance sampling}
  \end{frame}

	% end Importance sampling
  
  \begin{frame}
    \frametitle{Related work}
	\framesubtitle{Structure of hair}
	
	\begin{itemize}
	\item Hair fibers do have cuticle scales oriented at approximately 7 degrees.
	\item The core of the fiber (medulla and cortex) consist of pigment which absorbs specific wavelengths in the light.
	\end{itemize}
	
	\begin{figure}
	\includegraphics[scale=0.3]{../thesis/images/hair_structure.jpeg}
	\includegraphics[scale=0.25]{../thesis/hair-core.png}
	\end{figure}
  \end{frame}
  
  
  \begin{frame}
    \frametitle{Related work}
    \framesubtitle{Measured scattering data}
    Single fiber scattering model that models three visible scattering components:
    
    \begin{figure}
    \centering
    \includegraphics[scale=0.25]{../thesis/images/longitudinal_response.jpeg}
    \end{figure}
  \end{frame}
  
    \begin{frame}
    \frametitle{Related work}
    \framesubtitle{Marschner model}
    Single fiber scattering model that models three visible scattering components.
    \begin{itemize}
    \centering
    \item[R] reflection,
    \item[TT] double transmission,
    \item[TRT] transmission, reflection, transmission
    \end{itemize}
    
    \begin{columns}[onlytextwidth]
    \begin{column}{.45\textwidth}
    \begin{figure}
    	\includegraphics[scale=0.20]{../thesis/images/marschner_model_longitudinal.png}
    	\caption{Longitudinal scattering}
    \end{figure}
    \end{column}
    \hfill
    \begin{column}{.45\textwidth}
    \begin{figure}
    	\includegraphics[scale=0.09]{../thesis/circularcross.png}
    	\caption{Azimuthal scattering}
    \end{figure}
    \end{column}
    \end{columns}
  \end{frame}
  
  \begin{frame}
    \frametitle{Related work}
    \framesubtitle{Dualscattering Approximation}
  \end{frame}
  
  
  \begin{frame}
    \frametitle{Approach}
	Goals
  \end{frame}
  
  
  \begin{frame}
    \frametitle{Implementation}
    \framesubtitle{PBRT}
  \end{frame}
  
  \begin{frame}
    \frametitle{Implementation}
    \framesubtitle{Voxel grid}
  \end{frame}
  
  \begin{frame}
    \frametitle{Implementation}
    \framesubtitle{Memory and speed requirements}
  \end{frame}
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Dual scattering approximation IS 512 samples per pixel}
    \centering
	\includegraphics[scale=0.18]{../thesis/variance-results/deon512.png}    
  \end{frame}
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Importance sampling results}
    \centering
    
    \begin{columns}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=.6\textwidth,right]{../thesis/realworld/officesquare/deon_brown2_32.png} 
    \end{column}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=.6\textwidth,left]{../thesis/realworld/subway/deon_blonde1_32.png} 
    \end{column}
    \end{columns}
    
    \begin{columns}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=.6\textwidth,right]{../thesis/realworld/venice/deon_blonde2_32.png} 
    \end{column}
    \begin{column}{0.5\textwidth}
    \includegraphics[width=.6\textwidth,left]{../thesis/realworld/venice/deon_black2_32.png} 
    \end{column}
    \end{columns}
       
  \end{frame}
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Real world scenarios (Venice)}
    \centering
    
    \begin{columns}
    \begin{column}{0.5\textwidth}
    \centering
    Uniform Sampling (32 spp) 
    \end{column}
	\begin{column}{0.5\textwidth}
	\centering
	Importance Sampling (32 spp)
	\end{column}
	\end{columns}  
    
	\includegraphics[scale=0.165]{../thesis/realworld/venice/uniform_brown1_32.png}  
	\includegraphics[scale=0.165]{../thesis/realworld/venice/deon_brown1_32.png}   
  \end{frame}
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Real world scenarios (Office Square)}
    \centering
    
    \begin{columns}
    \begin{column}{0.5\textwidth}
    \centering
    Uniform Sampling (32 spp) 
    \end{column}
	\begin{column}{0.5\textwidth}
	\centering
	Importance Sampling (32 spp)
	\end{column}
	\end{columns}  
    
	\includegraphics[scale=0.165]{../thesis/realworld/officesquare/uniform_blonde1_32.png}  
	\includegraphics[scale=0.165]{../thesis/realworld/officesquare/deon_blonde1_32.png}   
  \end{frame}
  
    \begin{frame}
    \frametitle{Results}
    \framesubtitle{Real world scenarios (Subway Station)}
    \centering
    
    \begin{columns}
    \begin{column}{0.5\textwidth}
    \centering
    Uniform Sampling (32 spp) 
    \end{column}
	\begin{column}{0.5\textwidth}
	\centering
	Importance Sampling (32 spp)
	\end{column}
	\end{columns}  
    
	\includegraphics[scale=0.165]{../thesis/realworld/subway2/uniform_black1_32.png}  
	\includegraphics[scale=0.165]{../thesis/realworld/subway2/deon_black1_32.png}   
  \end{frame}
  
  %
  % Variance comparison
  %
   
   \begin{frame}
    \frametitle{Results}
    \framesubtitle{Variance computation}

	\begin{itemize}
    \item Variance $V$ is computed for a region $(w,h)$ of the image .
	\item Variance is computed by taking the average distance squared between the image to be analyzed $X$ with the ground truth $X'$.
	\item Ground truth is assumed to be uniform sampling at 512 spp.
	\end{itemize}
	
	\begin{columns}
    \begin{column}{0.65\textwidth}
	\begin{equation}
	V = \frac{1}{w\cdot h} \sum_{x=0}^w \sum_{y=0}^h (X_{x,y} - X'_{x,y})^2
	\end{equation}		
	\end{column}
	\begin{column}{0.35\textwidth}
	\includegraphics[scale=0.1]{../thesis/_variance-results/outline_hint.png}
	\end{column}
	\end{columns}
    
    \end{frame}
  
  
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Variance comparison}
    \centering
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un1.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is1.png}
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un2.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is2.png}
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un4.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is4.png}
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un8.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is8.png}
   

  \end{frame}
  
  \begin{frame}
    \frametitle{Results}
    \framesubtitle{Variance comparison}
    \centering

    \includegraphics[scale=0.5]{../thesis/variance-results/un16.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is16.png}
        
    \includegraphics[scale=0.5]{../thesis/variance-results/un32.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is32.png}
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un64.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is64.png}
    
    \includegraphics[scale=0.5]{../thesis/variance-results/un128.png} 
    \includegraphics[scale=0.5]{../thesis/variance-results/is128.png}
    
  \end{frame}
  
\begin{frame}
    \frametitle{Results}
    \framesubtitle{Variance plot}
    
    \begin{figure}
    \centering
    \includegraphics[scale=0.28]{../thesis/variance-results/variance-plot.png} 
    \caption{Logarithmic scale of variance that is reduced as the samples per pixel increase.}
    \end{figure}
  \end{frame}
  
  
  \begin{frame}
    \frametitle{Conclusion}
    \framesubtitle{Theoretical Challenges}
	
	\begin{itemize}
	\item Dual scattering model for this thesis is not fully energy conserving.
	\item Variance is lower for importance sampling, but not by the extend that it is clearly noticeable.
	\item Challenge to implement the dualscattering method in PBRT, because dual scattering makes use of an approximated volume (which does not fit a pure ray tracer).
	\item Involved physics and mathematical knowledge required. That was challenging to understand.
	\end{itemize}
  \end{frame}
  
  \begin{frame}
    \frametitle{Conclusion}
    \framesubtitle{Practical Challenges}
	
	\begin{itemize}
	\item Choice of rendering framework. Started from scratch, then Pixar Renderman, finally PBRT.
	\item Voxel grid implementation (OpenVdb) where hair fibers are assumed to be oriented in the same direction.
	\item Memory and speed requirements. Physics based rendering can take a long time. Feedback cycle is long.
	\item Non intuitiveness of Marschner model parameters.
	\end{itemize}
  \end{frame}
  
  \begin{frame}
  \frametitle{Conclusion}
  
  Applying importance sampling for the dual scattering method does not significantly reduce the noise compared to rendering using uniform sampling.
  \end{frame}
  
% etc
\end{document}